{"version":3,"sources":["webpack://tcard-jobs/./src/components/Help.js","webpack://tcard-jobs/./src/components/HelpApp.jsx","webpack://tcard-jobs/./src/fetchHelp.js"],"names":["Help","useContext","AContext","visiblePages","useState","help","setHelp","allhelp","setAllhelp","newQ","toggleNewQ","appid","useEffect","fetchHelp","then","res","console","log","results","makeData","ahelp","filterByPageNames","bhelp","indentData","slice","pages","fhelp","filter","a","length","includes","pagename","sort","b","qrank","map","m","sdata","reduce","acc","rr","r","toggle","qh","qid","qrankst","qedit","howto","qcontributor","ah","aid","arank","arankst","aedit","hereshow","acontributor","indent","push","lhw","pop","bshelp","sorted","handleVote","handleEditHelp","ed","e","id","d","edit","ahupd","idx","numans","setState","findIndex","ch","delHelp","newh","target","value","page","preventDefault","putHelpAns","props","state","putHelpQues","handleAddDelHelp","handleQuestion","q","insertId","newhelp","handleAnswer","styles","div0","backgroundColor","theme","root","width","troot","marginTop","spacing","unit","overflowX","table","minWidth","formControl","margin","heading","fontSize","typography","pxToRem","fontWeight","fontWeightRegular","textField","marginLeft","marginRight","HelpApp","xvote","letvote","setLetvote","Array","fill","toggles","setToggles","newQtxt","setNewQtxt","hpage","setHpage","vote","ids","up","vtype","isup","vhelp","qidx","h","qrec","vans","vidx","i","togs","dispUniTitl","tf","editQfield","nhelp","hidx","field","editAfield","ans","aidx","editAns","editQues","submitQ","saveQ","submitA","saveA","addAns","submitNewQ","delQ","delA","dans","renderAnswers","style","list","ul","j","li","v","l","hhow","renderQuestion","sum","div","how","renderNewQ","outer","theq","detli","titl","Vote","num","st3","color","padding","add","overflow","background","he","listStyleType","paddingInlineStart","paddingTop","borderBottom","rt","textAlign","lsh","ls","geta","url","cfg","options","headers","method","fetch","response","json","qmessage","message","p2","Promise","resolve","putVote","JSON","stringify","Accept","body","ques","qa"],"mappings":"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","file":"src_components_Help_js.8740c874e92c48016a52.js","sourcesContent":["import React, { useEffect , useState, useContext} from 'react'\r\nimport {putHelpQues,fetchHelp, delHelp, putHelpAns} from '../fetchHelp'\r\nimport HelpApp from \"./HelpApp.jsx\";\r\nimport {AContext} from '../contexts/acontext'\r\n\r\nexport default function Help(){\r\n  const {visiblePages} = useContext(AContext)\r\n  const [help, setHelp]= useState([])\r\n  const [allhelp, setAllhelp] = useState([])\r\n  const [newQ, toggleNewQ]= useState(false)\r\n  const appid ='jobs'\r\n\r\n  useEffect(()=>{\r\n    fetchHelp(appid)\r\n    .then((res)=>{\r\n      console.log('res: ', res)\r\n      setAllhelp(res.results)\r\n      makeData(res.results)\r\n    })\r\n  },[])\r\n\r\n  function makeData(allhelp){\r\n    const ahelp = filterByPageNames(allhelp)\r\n    const bhelp = indentData(ahelp.slice())\r\n    console.log('bhelp: ', bhelp)\r\n    setHelp(bhelp)\r\n    return bhelp\r\n  }\r\n\r\n  const filterByPageNames=(allhelp)=>{\r\n    console.log('allhelp: ', allhelp)\r\n    const pages= visiblePages\r\n    const fhelp = [...allhelp]\r\n    .filter((a)=>{\r\n      return pages.length==1 ? true : pages.includes(a.pagename)\r\n    })\r\n    .sort((a,b)=>{\r\n      if (b.pagename===a.pagename){\r\n        return b.qrank<a.qrank ? -1 : 1\r\n      }\r\n      return b.pagename>a.pagename ? -1 : 1\r\n    })\r\n    .map((m)=>{\r\n      return m  \r\n    })\r\n    return fhelp\r\n  }\r\n\r\n  const indentData = (sdata)=>{\r\n    console.log('sdata: ', sdata)\r\n    let bhelp = sdata\r\n    .reduce((acc,rr)=>{\r\n      const r = {...rr}\r\n      r.toggle=true\r\n      let qh = {\r\n        qid:r.qid,\r\n        qrank:r.qrank,\r\n        qrankst: r.qrankst,\r\n        qedit:r.qedit,\r\n        howto:r.howto,\r\n        appid:r.appid,\r\n        pagename:r.pagename,\r\n        qcontributor:r.qcontributor\r\n      }\r\n      let ah = {\r\n        qid: r.qid,\r\n        aid: r.aid,\r\n        arank:r.arank, \r\n        arankst: r.arankst,\r\n        aedit: r.aedit,\r\n        hereshow:r.hereshow, \r\n        acontributor:r.acontributor\r\n      }\r\n      if(acc.length==0){\r\n        qh.indent=[ah]\r\n        acc.push(qh)\r\n      }else{\r\n        let lhw = acc.pop()\r\n        if(lhw.qid==r.qid){\r\n          lhw.indent.push(ah)\r\n          acc.push(lhw)\r\n        }else{\r\n          qh.indent = [ah]\r\n          acc.push(lhw)\r\n          acc.push(qh)\r\n        }\r\n      }\r\n      return acc\r\n    },[])  \r\n    const bshelp=bhelp.map((b)=>{\r\n      if(b.indent.length>1){\r\n        const sorted = b.indent\r\n        .sort((a,b)=>{\r\n          return a.arank<b.arank\r\n        })\r\n        b.indent=sorted\r\n      }\r\n      return b\r\n    })\r\n    return bshelp     \r\n  }\r\n\r\n  const handleVote =()=>{\r\n    console.log('handleVote')\r\n  }\r\n\r\n\r\n  const handleEditHelp=(ed)=>(e)=>{\r\n    const id = ed.d=='q' ? 'qid' : 'aid'\r\n    const edit = ed.d=='q' ? 'qedit' : 'aedit'\r\n    let {m}=ed\r\n    console.log('ed: ', ed)\r\n    const ahupd= help.map((a)=>{\r\n      // console.log('ed.m[id], a[id]: ', id, ed.m[id], a[id])\r\n      if(1==1){\r\n        switch (ed.do) {\r\n          case 'input':\r\n            console.log('edit: ', edit)\r\n            if (edit=='qedit'){\r\n              a[edit]=true\r\n            }else{\r\n              a.indent[ed.idx].aedit=true\r\n              console.log('a.indent[ed.idx].aedit: ', a.indent[ed.idx].aedit)\r\n            }\r\n            break;\r\n          case 'clearans':\r\n            const numans = allhelp.filter((a)=>a.qid==ed.m.qid).length\r\n            if (numans>1){\r\n              help.allhelp=allhelp.filter((a)=>a.aid!=ed.m.aid)\r\n              this.setState({help} )\r\n            }else{\r\n              const idx = allhelp.findIndex((a)=>a.aid==ed.m.aid)\r\n              let ch = allhelp[idx]\r\n              ch = {...ch, hereshow:null, arank:null, acontributor:null}\r\n              allhelp[idx]=ch\r\n              help.allhelp=allhelp\r\n              this.setState({help} )              \r\n            }\r\n            delHelp(appid, ed.m[id], 'a')\r\n            break;\r\n          case 'clearques':\r\n            const newh = allhelp.filter((a)=>a.qid!=ed.m.qid)\r\n            help.allhelp=newh\r\n            this.setState({help} )\r\n            delHelp(appid, ed.m[id],'q')\r\n            break;  \r\n          case 'changeq':\r\n            a.howto=e.target.value \r\n            break; \r\n          case 'changeans':\r\n            console.log('a.indent[ed.idx]: ', a.indent, ed)\r\n            a.indent[ed.idx].hereshow=e.target.value \r\n            break; \r\n          case 'selectp':\r\n            a.pagename=e.target.value \r\n            this.setState({page:e.target.value})\r\n            break; \r\n          case 'submita':\r\n            e.preventDefault()\r\n            putHelpAns(appid, {aid:a.aid, qid:a.qid, hereshow:a.hereshow, arank:a.arank, acontributor:a.acontributor})\r\n            .then((res)=>{\r\n              if(a.aid>7000){\r\n                fetchHelp(this.props.help.appid)\r\n                .then((res)=>{\r\n                  const allhelp = res.results.map((m)=>{\r\n                    m.qrankst=0\r\n                    m.arankst=0\r\n                    m.qedit=false\r\n                    m.aedit=false\r\n                    return m\r\n                  })\r\n                  console.log('allhelp: ', allhelp)\r\n                  const{help}=this.state\r\n                  help.allhelp=allhelp\r\n                  this.setState({help:help}, console.log('this.props: ', this.props))\r\n                })                \r\n              }\r\n              console.log('a.aid: ', a.aid)\r\n              console.log('res: ', res)})\r\n            a[edit]=false \r\n            break; \r\n          case 'submitq':\r\n            console.log('m: ', m)\r\n            putHelpQues(appid, {qid:m.qid, howto:m.howto,appid, pagename:m.pagename,})\r\n            a[edit]=false \r\n            break; \r\n          default :\r\n             break;\r\n        }  \r\n      }\r\n      return a\r\n    })\r\n    setAllhelp(ahupd)\r\n  }\r\n\r\n  const handleAddDelHelp= (ed)=>()=>{\r\n    e.preventDefault\r\n    console.log('handleAddDelHelp', ed)\r\n  }\r\n  \r\n  const handleQuestion =(q)=>()=>{\r\n    const{m}=q\r\n    m.appid =appid\r\n    putHelpQues(appid, {qid:m.qid, howto:m.howto, appid:m.appid, pagename:m.pagename,})\r\n    .then((res)=>{\r\n      console.log('res: ', res)\r\n      m.qid = res.results[0].insertId\r\n      const newhelp =[...help]\r\n      newhelp.push(m)\r\n      console.log('newhelp: ', newhelp)\r\n      setHelp(newhelp)\r\n    })\r\n  }\r\n\r\n  const handleAnswer=(a)=>()=>{\r\n    const{m}=a\r\n    console.log('a: ', a)\r\n  }\r\n\r\n  return(\r\n    <div>\r\n    <HelpApp \r\n      ahelp={help} \r\n      xvote={handleVote} \r\n      modifyAnswer={handleAnswer}\r\n    />\r\n    <i onClick={handleAddDelHelp({do:'newQ', pages:'jobs'})}                        className=\"material-icons\">add\r\n    </i>\r\n    {newQ &&\r\n    <form onSubmit={handleAddDelHelp({do:'submitnewq'})}>\r\n      <select value={this.state.page} onChange={handleAddDelHelp({do:'selectp',})}>\r\n      {/* {help.routes.map((r,i)=>{\r\n        return (<option value={r.page} key={i}>{r.page} </option> )\r\n      })} */}\r\n      </select>\r\n      <textarea name=\"d\" id=\"\" cols=\"40\" rows=\"4\" value={'dog'} onChange={handleAddDelHelp({do:'changeq'})}/>\r\n      <input type=\"submit\" value=\"Submit\" />\r\n    </form>\r\n    }\r\n    </div>\r\n  )\r\n\r\n//   return(\r\n//     <div style ={styles.help.div0}>\r\n\r\n\r\n//       <span>\r\n//       Dog Shares of GameStop — the company at the center of an online buying binge that captured the imagination of the world last week — crashed another 42 percent on Thursday, leaving it at a small fraction of the value it held just a few days ago.\r\n\r\n// It was the third plunge in four trading sessions for the stock, which had become the symbolic heart of an online crusade against some of Wall Street’s most sophisticated investors.\r\n\r\n// Shares of GameStop closed at $53.50, almost 90 percent below their peak of $483 on Thursday morning last week.\r\n\r\n// The video game retailer’s stock is down 84 percent this week, and the rout has convinced many who favored the stock that the ride is over.\r\n\r\n// “GME is dead,” one user, BoBo_HUST, wrote on Reddit’s WallStreetBets forum, using GameStop’s ticker symbol. Then the commenter wondered aloud about the prospects of one of the other so-called meme stocks, BlackBerry. “Can BB save us?”\r\n\r\n// BlackBerry, the once-dominant maker of mobile device\r\n//       </span>\r\n//     </div>\r\n//   )\r\n}\r\n\r\nconst styles ={\r\n  help:{\r\n    div0:{\r\n      backgroundColor: '#c7b1c9'\r\n    }\r\n  }\r\n}","import React, {useState, useContext, useEffect} from 'react'// eslint-disable-line no-unused-vars\n\nimport { withStyles } from '@material-ui/core/styles';\nimport {Accordion, AccordionSummary, AccordionDetails} from '@material-ui/core';// eslint-disable-line no-unused-vars\nimport TextField from '@material-ui/core/TextField';// eslint-disable-line no-unused-vars\nimport {AContext} from '../contexts/acontext'\nimport {putHelpQues, putHelpAns, delHelp, putVote } from '../fetchHelp'\n\n\n\nconst styles = theme => ({\n  root:{\n    width:'100%'\n  },\n  troot: {\n    width: '100%',\n    marginTop: theme.spacing.unit * 3,\n    overflowX: 'auto',\n  },\n  table: {\n    minWidth: 300,\n  },\n  formControl: {\n    margin: theme.spacing.unit,\n    minWidth: 120,\n  },\n  heading: {\n    fontSize: theme.typography.pxToRem(14),\n    fontWeight: theme.typography.fontWeightRegular,\n  },\n  textField: {\n    marginLeft: theme.spacing.unit,\n    marginRight: theme.spacing.unit,\n    width: 200,\n  },\n});\n\nexport default function HelpApp ({ahelp,xvote}){\n  const [letvote,setLetvote]=useState(true)\n  const [toggles,setToggles]=useState(new Array(100).fill(false))\n  const [newQ, toggleNewQ]= useState(false)\n  const [newQtxt, setNewQtxt]= useState('')\n  const {visiblePages,appid} = useContext(AContext)\n  const [hpage, setHpage] = useState(visiblePages[0])\n  const [help, setHelp] = useState(ahelp)\n\n\n  useEffect(()=>{\n    setHelp(ahelp)\n  },[ahelp])\n\n  const vote=(ids ,up, vtype)=>()=>{\n    console.log('voting', ids, up, vtype)\n    // const maxvotes =2\n    const isup = up ? 1 : -1\n    // const idtype = vtype=='qrank' ? 'qid' : 'aid'\n    // const qa = vtype=='qrank' ? 'q' : 'a'\n    // const st3 = vtype+'st'\n    const vhelp =[...help]\n    const qidx = vhelp.findIndex((h)=>h.qid*1==ids[0]*1)\n    const qrec = vhelp[qidx]\n    if(vtype=='qrank'){\n      qrec[vtype] += isup\n    }else{\n      const vans = [...qrec.indent]\n      const vidx = vans.findIndex((h)=>h.aid*1==ids[1]*1)\n      vans[vidx].arank += isup\n      qrec.indent=vans\n    }\n    vhelp[qidx]=qrec\n    setHelp(vhelp)\n    // const ahupd= help\n    // .map((m)=>{\n    //   if (m[idtype]==id){\n    //     let t = Math.abs(m[st3] + isup)\n    //     if(t<=maxvotes){\n    //       m[st3] = m[st3] + isup\n    //       m[vtype] = m[vtype] + isup\n    //       putVote(appid, {vtype, idtype, qa, id, rank:m[vtype]})\n    //     }\n    //   }\n    //   return m\n    // })\n    // setHelp(ahupd)\n  }\n\n  const toggle=(i)=>()=>{\n    let togs = [...toggles]\n    togs[i]= !togs[i]\n    setToggles(togs)\n  }\n\n  const dispUniTitl=(bhelp,h,i)=>()=>{\n    let tf = true\n    if(bhelp[i-1] && bhelp[i-1].pagename==h.pagename) {\n      tf= false\n    }\n    return tf\n  }\n\n  const editQfield = (ed)=>{\n    const nhelp = [...help]\n    const hidx = nhelp.findIndex((h)=>h.qid==ed.qid)\n    nhelp[hidx][ed.field]=ed.value\n    setHelp(nhelp) \n  }\n\n  const editAfield =(ed)=>{\n    const nhelp = [...help]\n    const hidx = nhelp.findIndex((h)=>h.qid==ed.qid)\n    const ans  = [...nhelp[hidx].indent]\n    const aidx = ans.findIndex((a)=>a.aid==ed.aid)\n    ans[aidx][ed.field]=ed.value\n    nhelp.indent =ans\n    setHelp(nhelp)\n  }\n\n  const editAns =(ed)=>(e)=>{\n    if(!ed.value){\n      ed.value = e.target.value\n    }\n    editAfield(ed)\n  }\n\n  const editQues=(ed)=>(e)=>{\n    console.log('ed: ', ed)\n    if(!ed.value){\n      ed.value = e.target.value\n    }\n    editQfield(ed)\n  }\n\n  const submitQ =(h,i)=>(e)=>{\n    console.log('submitQ', h, i)\n    e.preventDefault()\n    editQfield({field:'qedit', qid:h.qid, value:false})\n    saveQ(h)\n  }\n\n  const submitA =(h,i)=>(e)=>{\n    console.log('submitA', h, i)\n    e.preventDefault()\n    editAfield({field:'aedit', qid:h.qid, aid:h.aid, value:false})\n    delete h.arankst\n    delete h.aedit\n    saveA(h)\n  }\n\n  const addAns=(q)=>()=>{\n    console.log('a: ', a)\n    const a={qid:q.qid, aid:9999, hereshow:'heres how', aedit:true, arank:0}\n    const nhelp = [...help]\n    const hidx = nhelp.findIndex((h)=>h.qid==q.qid)\n    nhelp[hidx].indent.push(a)\n    setHelp(nhelp) \n    console.log('help: ', help, nhelp[hidx])\n  }\n\n  const submitNewQ =()=>{\n    const m={\n      pagename:hpage, \n      appid:appid,\n      qid:8888, \n      howto:newQtxt, \n      indent:[],\n      qrank: 0\n    }\n    toggleNewQ(false)\n    saveQ(m)\n  }\n\n  const saveQ =(m)=>{\n    putHelpQues(appid, {qid:m.qid, howto:m.howto, appid:m.appid, pagename:m.pagename})\n    .then((res)=>{\n      if(m.qid*1==8888){\n        m.qid = res.results[0].insertId\n        const newhelp =[...help]\n        newhelp.push(m)\n        newhelp\n        .sort((a,b)=>{\n          if (b.pagename===a.pagename){\n            return b.qrank<a.qrank ? -1 : 1\n          }\n          return b.pagename>a.pagename ? -1 : 1\n        })\n        console.log('newhelp: ', newhelp)\n        setHelp(newhelp)\n      }\n    })\n  }\n\n  const saveA =(m)=>{\n    putHelpAns(appid, m)\n    .then((res)=>{\n      if(m.aid*1==9999){\n        editAfield({field:'aid', qid:m.qid, aid:9999, value:res.results[0].insertId })\n      }\n    })\n  }\n\n  const delQ=(id)=>()=>{\n    const nhelp = help.filter((h)=>h.qid*1 != id*1)\n    setHelp(nhelp)\n    delHelp(appid, id ,'q')\n  }\n\n  const delA=(qid, aid)=>()=>{\n    const nhelp = [...help]\n    const hidx = nhelp.findIndex((h)=>h.qid*1==qid*1)\n    const ans  = [...nhelp[hidx].indent]\n    const dans = ans.filter((a)=>a.aid*1!=aid*1)\n    nhelp[hidx].indent =dans\n    setHelp(nhelp)\n    delHelp(appid, aid ,'a')\n  }\n\n  const renderAnswers=(h)=>()=>{\n    return(\n      <ul style={style.list.ul}>\n      {h.indent.map((m,j)=>{\n        if(!m.aedit){\n          return(\n            <li style={style.list.li} key={j}>\n              {letvote &&\n              <Vote m={[h.qid, m.aid]} vote={vote} vtype='arank' num={m.arank} style={v.l}/>\n              }\n              <div style={style.list.hhow}>\n                {m.hereshow} \n                {/* ({h.qid}, {m.aid}) */}\n              </div><br/>\n              <i onClick={editAns({field:'aedit', qid:h.qid, aid:m.aid, value:true})} className=\"material-icons\">edit</i>\n              <i onClick={delA(h.qid, m.aid)}  className=\"material-icons\">clear</i>\n            </li>\n            )\n        }else{\n          m.hereshow = !m.hereshow ? '' : m.hereshow\n          return (\n          <div>\n            <textarea name=\"d\" id=\"\" cols=\"30\" rows=\"4\" value={m.hereshow} \n              onChange={editAns({field:'hereshow', qid:h.qid, aid:m.aid})}/>\n            <button \n              onClick={\n                submitA(m)}>Submit</button>\n          </div>\n          )\n        }\n        })}\n      </ul>\n    )\n  }\n\n  const renderQuestion=(h,i)=>()=>{\n    if(!h.qedit){\n      return(\n      <div style={style.sum.div}>\n        <div onClick={toggle(i)} style={style.sum.how}>\n          {h.howto} \n          {/* ({h.qid}) */}\n        </div>\n        {letvote &&\n        <Vote m={[h.qid]} vote={vote} vtype='qrank' num={h.qrank} style={v.r}/>\n        }\n      </div>\n      )\n    }else{\n      return(\n        <form onSubmit={submitQ(h,i)} key={i}>\n        <textarea name={h.qid} id={h.qid} cols=\"30\" rows=\"4\" value={h.howto} onChange={editQues({field:'howto', qid:h.qid})}/>\n        <input type=\"submit\" value=\"Submit\" />\n        </form>\n      )\n    }\n  }\n\n  const renderNewQ = ()=>{\n    if(!newQ){\n      return(\n        <i onClick={()=>toggleNewQ(!newQ)} className=\"material-icons\">add</i>\n      )\n    }else{\n      return(\n        <div>\n          <select onChange={(e)=>setHpage(e.target.value)}>\n          {visiblePages.map((r,j)=>{\n            return (<option value={r} key={j}>{r}</option> )\n          })}\n          </select>  \n          <textarea name=\"d\" id=\"\" cols=\"30\" rows=\"4\" value={newQtxt} \n          onChange={(e)=>setNewQtxt(e.target.value)}/>\n          <button onClick={submitNewQ}>Submit</button>\n        </div>\n      )\n    }\n    \n  }\n\n  return(\n  <div style={style.outer} >\n    <h4> Help {renderNewQ()}</h4>\n    \n    {help.map((h,i)=>{\n      const theq = renderQuestion(h,i)\n      const detli = renderAnswers(h,i)\n      const titl = dispUniTitl(help,h,i)()\n      return(\n      <div key={i}>\n        {titl && h.pagename}\n      <Accordion  key={i} expanded={toggles[i]}>\n        <AccordionSummary >\n          {theq()}\n        </AccordionSummary>\n        <AccordionDetails>\n        <i onClick={addAns(h)}  className=\"material-icons\">add</i>\n        <i onClick={delQ(h.qid)}  className=\"material-icons\">clear</i>\n        <i onClick={editQues({field:'qedit', qid:h.qid, value:true})}className=\"material-icons\">edit</i>\n          {detli()}\n        </AccordionDetails>\n      </Accordion>\n      </div>\n      )\n    })}\n    \n  </div>\n  )\n}\n\n\nfunction Vote(props){// eslint-disable-line no-unused-vars\n  const{m, vote, vtype, style, num}= props\n  const st3 = vtype+'st'\n  // console.log('m[idtype]: ', m[idtype], vtype)\n  return(\n    <div style={style.vote}>\n      <i onClick={vote(m, true, vtype)} \n      className=\"material-icons\"\n      style={m[st3]>0 ? {color:'orange'} : {color:'lightgrey'}}>\n          keyboard_arrow_up\n      </i>\n      {num}\n      <i onClick={vote(m, false, vtype)} \n      className=\"material-icons\"\n      style={m[st3]<0 ? {color:'orange'} : {color:'lightgrey'}}>\n        keyboard_arrow_down\n      </i>\n    </div>\n    )\n}\n\n\nconst v = {\n  r: {\n    vote:{\n      float: 'right',\n      padding:'0 0 0 3px'\n    }\n  },\n  l:{\n    vote:{\n      float: 'left',\n      padding:'0 0 0 3px'\n    }\n  }\n}\n\n\n\nconst style = {\n  add:{\n  },\n  outer:{\n    overflow:'hidden',\n    padding: '4px',\n    margin: '2px 10px 10px 10px',\n    background: '#99CCFF'\n  },\n  he:{\n    overflow:'hidden',\n    margin: '2px 10px 10px 10px',\n   padding: '4px',\n    background: '#C4A265'\n  },\n  list:{\n    ul:{ \n      listStyleType: 'none',\n      paddingInlineStart: '0px',\n      width:'100%'\n      //display: 'flex',\n      //flexDirection: 'column'\n    },\n    li:{\n      overflow:'hidden',\n      paddingTop: '8px',\n      borderBottom: '1px solid',\n      width: '100%',\n      //flex:1\n    },\n    rt:{\n      float:'right',\n      textAlign:'right'\n    },\n    hhow:{\n      width: '80%',\n      float:'right'\n    }\n  },\n  vote:{\n    float:'right'\n  },\n  sum:{\n    div:{\n      padding: '1px',\n      width: '100%'\n    },\n    how:{\n      float:'left',\n      width:'75%',\n      padding:'1px'\n    }\n  }\n}","import {ls, cfg} from './utilities/getCfg'\nimport {geta} from './utilities/wfuncs'\n\nconst fetchHelp=(appid)=>{\n  console.log('in fetch help o')\n  var lsh = ls.getItem();\n  if(geta('lsh.token', lsh)){\n    let url= cfg.url.api+'/common/help/'+appid\n    let options= {\n      headers: {'Authorization': 'Bearer '+ lsh['token']},\n      method: 'GET'\n    }\n    return(\n      fetch(url, options)\n        .then((response)=>response.json())\n        .then((json)=>json)\n        .catch((e)=>{\n          return {qmessage: e.message}\n        })\n      )         \n  }else{\n    let p2 =Promise.resolve({qmessage:'you do not seem to be known on this device '})\n    return p2\n  }\n}\n\nconst putVote=(appid,vote)=>{\n  var lsh = ls.getItem();\n  console.log(JSON.stringify({vote:vote}))\n  if(geta('lsh.token', lsh)){\n    let url= cfg.url.api+'/common/help/vote/'+appid\n    let options= {\n      headers: {'Authorization': 'Bearer '+ lsh['token'],\n        Accept: 'application/json',\n        'Content-Type': 'application/json',\n      },\n      method: 'PUT',\n      body: JSON.stringify({vote:vote})\n    }\n    return(\n      fetch(url, options)\n        .then((response)=>response.json())\n        .then((json)=>json)\n        .catch((e)=>{\n          return {qmessage: e.message}\n        })\n      )         \n  }else{\n    let p2 =Promise.resolve({qmessage:'you do not seem to be known on this device '})\n    return p2\n  }\n}\n\nconst putHelpAns=(appid, ans)=>{\n  var lsh = ls.getItem();\n  console.log(JSON.stringify({ans:ans}))\n  if(geta('lsh.token', lsh)){\n    let url= cfg.url.api+'/common/help/ans/'+appid\n    let options= {\n      headers: {'Authorization': 'Bearer '+ lsh['token'],\n        Accept: 'application/json',\n        'Content-Type': 'application/json',\n      },\n      method: 'PUT',\n      body: JSON.stringify({ans:ans})\n    }\n    return(\n      fetch(url, options)\n        .then((response)=>response.json())\n        .then((json)=>json)\n        .catch((e)=>{\n          return {qmessage: e.message}\n        })\n      )         \n  }else{\n    let p2 =Promise.resolve({qmessage:'you do not seem to be known on this device '})\n    return p2\n  }\n}\nconst putHelpQues=(appid,ques)=>{\n  var lsh = ls.getItem();\n  console.log(JSON.stringify({ques:ques}))\n  if(geta('lsh.token', lsh)){\n    let url= cfg.url.api+'/common/help/ques/'+appid\n    let options= {\n      headers: {'Authorization': 'Bearer '+ lsh['token'],\n        Accept: 'application/json',\n        'Content-Type': 'application/json',\n      },\n      method: 'PUT',\n      body: JSON.stringify({ques:ques})\n    }\n    return(\n      fetch(url, options)\n        .then((response)=>response.json())\n        .then((json)=>json)\n        .catch((e)=>{\n          return {qmessage: e.message}\n        })\n      )         \n  }else{\n    let p2 =Promise.resolve({qmessage:'you do not seem to be known on this device '})\n    return p2\n  }\n}\n\nconst delHelp=(appid, id, qa)=>{\n  var lsh = ls.getItem();\n  if(geta('lsh.token', lsh)){\n    let url= cfg.url.api+'/common/help/del/'+appid+'/'+qa+'/'+id  \n    let options= {\n      headers: {'Authorization': 'Bearer '+ lsh['token'],\n        Accept: 'application/json',\n        'Content-Type': 'application/json',\n      },\n      method: 'DELETE'\n    }\n    return(\n      fetch(url, options)\n        .then((response)=>response.json())\n        .then((json)=>json)\n        .catch((e)=>{\n          return {qmessage: e.message}\n        })\n      )         \n  }else{\n    let p2 =Promise.resolve({qmessage:'you do not seem to be known on this device '})\n    return p2\n  }\n}\n\n\nexport {fetchHelp, putHelpAns, putHelpQues, delHelp, putVote}\n"],"sourceRoot":""}